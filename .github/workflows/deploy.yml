name: ğŸš€ Korean Dictionary ìë™ ë°°í¬

on:
  push:
    branches: [ main ]

jobs:
  deploy:
    runs-on: ubuntu-latest
    steps:
    - name: ğŸ“¥ ì½”ë“œ ì²´í¬ì•„ì›ƒ
      uses: actions/checkout@v3
    
    - name: ğŸš€ Digital Ocean ì„œë²„ì— ë°°í¬
      uses: appleboy/ssh-action@v0.1.5
      with:
        host: ${{ secrets.HOST }}
        username: ${{ secrets.USERNAME }}
        key: ${{ secrets.SSH_PRIVATE_KEY }}
        script: |
          echo "ğŸ”„ í•œêµ­ì–´ ì‚¬ì „ ë°°í¬ ì‹œì‘..."
          cd /var/www/mysite
          git pull origin main
          
          # Python ê°€ìƒí™˜ê²½ í™œì„±í™” ë° íŒ¨í‚¤ì§€ ì„¤ì¹˜
          source venv/bin/activate
          pip install -r requirements.txt
          
          # Flask ì•± ì¬ì‹œì‘ (ì„œë¹„ìŠ¤ê°€ ìˆë‹¤ë©´)
          # sudo systemctl restart mysite
          
          echo "âœ… ë°°í¬ ì™„ë£Œ!"
